<!DOCTYPE html>
<html lang=en>
<head>
<script src = "https://cdn.rawgit.com/mrdoob/three.js/r84/build/three.js"></script>
<script src = "https://sdk.altvr.com/libs/altspace.js/2.9.0/altspace.min.js"></script>
<script src = "https://cdnjs.cloudflare.com/ajax/libs/tween.js/16.3.5/Tween.min.js"></script>
<script src = "https://cdn.rawgit.com/NGenesis/altspacevr-behaviors/v1.0.0/js/altspaceutil.min.js"></script>
<script src = "../../console/Console.js"></script>
<script src = "PetBehaviors.js"></script>
</head>
<body>
<script>

var ballTextureURL = "https://cmdrflexo.github.io/AltspaceSDK-Flexo/examples/flexo/flexorama/pet/bb.png";

var testing = false;
if(!testing) altspaceutil.getFullspaceEnclosure().then(function(enclosure) { start(); });
else start();

var sim;
var sceneConsole;

function start() {
    sim = new altspace.utilities.Simulation();
    // sceneConsole = SetupConsole(20, 0.6);

    //
    // spin out js to pet.js
    //

    var followTarget = new THREE.Object3D();
    followTarget.position.y = 10;
    sim.scene.add(followTarget);

    var follower = new THREE.Mesh(
        new THREE.SphereGeometry(1, 16, 8),
        new THREE.MeshBasicMaterial({
            color: 0xffffff,
            map: new THREE.Texture({ 
                src: altspaceutil.getAbsoluteURL(ballTextureURL)
            })
        })
    );
    follower.position.y = 0.5;
    follower.addBehavior(new Follower(followTarget, 1, 5));
    
    sim.scene.add(follower);
}

function SetupConsole(maxLines, spacing) {
    var con = new THREE.Object3D();
    con.addBehavior(new altspaceutil.behaviors.Console({ maxlines: maxLines, passive: false, spacing: spacing }));
    sim.scene.add(con);
    sim.scene.updateAllBehaviors();
    return con;
}

</script>
</body>
</html>

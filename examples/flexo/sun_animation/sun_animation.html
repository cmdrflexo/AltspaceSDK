<!DOCTYPE html>
<html lang=en>
    <head>
        <script src = "https://cdn.rawgit.com/mrdoob/three.js/r84/build/three.js"></script>
        <script src = "https://sdk.altvr.com/libs/altspace.js/2.9.0/altspace.min.js"></script>
        <script src = "https://cdnjs.cloudflare.com/ajax/libs/tween.js/16.3.5/Tween.min.js"></script>
        <script src = "https://cdn.rawgit.com/NGenesis/altspacevr-behaviors/v1.0.0/js/altspaceutil.min.js"></script>
        <script src = "../motion/motion.js"></script>
    </head>
    <body>
        <script>
            var skyDayURL = "https://cmdrflexo.github.io/AltspaceSDK-Flexo/examples/flexo/images/sky/sky_test3.png";
            var skyNightURL = "https://cmdrflexo.github.io/AltspaceSDK-Flexo/examples/flexo/images/sky/galaxy.jpg";

            altspace.getEnclosure().then(function(enclosure) {
                enclosure.requestFullspace().then(function() {
                    enclosure.addEventListener('fullspacechange', function() {
                        if(!enclosure.fullspace) enclosure.requestFullspace();
                    });
            // altspaceutil.getFullspaceEnclosure().then(function(enclosure) {

                sim = new altspace.utilities.Simulation();
                
                var originReference = new THREE.Mesh(
                    new THREE.BoxGeometry(1, 0.1, 1),
                    new THREE.MeshBasicMaterial({ color: 0xffffff })
                )

                var groundPlane = new THREE.Mesh(
                    new THREE.PlaneGeometry(10000, 10000),
                    new THREE.MeshBasicMaterial({ color: 0x062116 })
                )
                groundPlane.rotation.x = THREE.Math.degToRad(-90);

                // function SkySphere(size, textureURL) {
                //     var skySphere = new THREE.Mesh(
                //         new THREE.SphereGeometry(size, 32, 16),
                //         new THREE.MeshBasicMaterial(
                //         {
                //             color: 0xffffff,
                //             map: new THREE.Texture(
                //                 { 
                //                     src: altspaceutil.getAbsoluteURL(textureURL)
                //                 }
                //             )
                //         }
                //     )
                //     );
                //     skySphere.scale.x = -1;
                //     return skySphere;
                // }

                // var skyDay = SkySphere(1600, skyDayURL);
                // skyDaye.rotation.z = THREE.Math.degToRad(-45);

                // var skyNight = SkySphere(1500, skyNightURL);
                // skyNight.rotation.x = THREE.Math.degToRad(45);
                // skyNight.addBehavior(new SkyRotate(-2000));
                // skyNight.addBehavior(new SkyFade(1, 1));
                
                sim.scene.add(originReference);
                sim.scene.add(groundPlane);
                // sim.scene.add(skyNightSphere);
                // sim.scene.add(skyDaySphere);
            });
        });
        </script>
    </body>
</html>
